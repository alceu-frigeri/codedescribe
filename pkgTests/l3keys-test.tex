%%%==============================================================================
%% Copyright 2023-present by Alceu Frigeri
%%
%% This work may be distributed and/or modified under the conditions of
%%
%% * The [LaTeX Project Public License](http://www.latex-project.org/lppl.txt),
%%   version 1.3c (or later), and/or
%% * The [GNU Affero General Public License](https://www.gnu.org/licenses/agpl-3.0.html),
%%   version 3 (or later)
%%
%% This work has the LPPL maintenance status *maintained*.
%%
%% The Current Maintainer of this work is Alceu Frigeri
%%
%% This is version {1.10} {2025/08/04} 
%%
%% The list of files that compose this work can be found in the README.md file at
%% https://ctan.org/pkg/starray
%%
%%%==============================================================================
\documentclass{article}

\ExplSyntaxOn


\keys_define:nn { thismod}
  {
  	st .tl_set:N          = \l__this_st_tl,
    st .value_required:n = true,
    unknown . undefine: ,
    unknown . code:n = { 
      key$\rightarrow$~ \tl_to_str:N \l_keys_key_str \par
      
      value$\rightarrow$~ \tl_to_str:N \l_keys_value_tl\par
    }
 }

\cs_new_protected:Npn \setthis #1
  {
    \keys_set:nn { thismod } {#1}
  }

\ExplSyntaxOff


\begin{document}

Works fine (no value)\par
\setthis {not-a-key}

~

Works fine (with a value)\par
\setthis {not-a-key = with:value }


~


The part after the colon in ``lost''\par
\setthis {{also:not-a-key}}


~

This also generates an error: ``The value expansion 'not-a-key' is unknown''\par
\setthis {and:not-a-key = with:value}


\end{document} 